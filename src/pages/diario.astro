---
import BaseLayout from '../layouts/BaseLayout.astro'
---

<BaseLayout 
    title="Mi Diario de Bienestar | Sensus"
    description="Tu espacio personal para ejercicios de relajación, reflexión y seguimiento de tu progreso hacia el bienestar mental."
    keywords="diario emocional, ejercicios ansiedad, bienestar mental, relajación, mindfulness, progreso personal"
    pageStylesheets={[
        '/src/styles/pages/diary-wellness.css'
    ]}
    themeColor="#d7cdf2"
    activeNav="diario"
>
    <!-- Hero Section Mejorado -->
    <section class="hero-section diary-hero-enhanced" aria-labelledby="diary-main-title">
        <div class="container">
            <div class="hero-content">
                <h1 id="diary-main-title" class="hero-title fade-in-up">Mi Diario de Bienestar</h1>
                <p class="hero-subtitle fade-in-up">Tu espacio personal para ejercicios de relajación, reflexión y seguimiento de tu progreso hacia el bienestar mental.</p>
                
                <!-- Quick Actions Bar -->
                <div class="quick-actions-bar fade-in-up">
                    <button class="quick-action-btn" id="quick-mood-check" title="Registro rápido de estado de ánimo">
                        <i class="fas fa-heart"></i>
                        <span>Estado de ánimo</span>
                    </button>
                    <button class="quick-action-btn" id="quick-breathing" title="Ejercicio rápido de respiración">
                        <i class="fas fa-lungs"></i>
                        <span>Respiración</span>
                    </button>
                    <button class="quick-action-btn" id="quick-reflection" title="Reflexión rápida">
                        <i class="fas fa-pen"></i>
                        <span>Reflexión</span>
                    </button>
                    <button class="quick-action-btn" id="view-progress" title="Ver mi progreso">
                        <i class="fas fa-chart-line"></i>
                        <span>Progreso</span>
                    </button>
                </div>
                
                <!-- Estadísticas de Confianza Animadas -->
                <div class="trust-stats fade-in-up">
                    <div class="stat-item">
                        <span class="stat-number" data-count="0" id="current-streak">0</span>
                        <span class="stat-label">días consecutivos</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" data-count="0" id="total-sessions">0</span>
                        <span class="stat-label">sesiones completadas</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" data-count="100">100</span>
                        <span class="stat-label">% privacidad</span>
                    </div>
                </div>
                
                <!-- Badges de Confianza -->
                <div class="trust-badges fade-in-up">
                    <div class="trust-badge">
                        <i class="fas fa-shield-alt"></i>
                        Datos encriptados
                    </div>
                    <div class="trust-badge">
                        <i class="fas fa-heart"></i>
                        Basado en ciencia
                    </div>
                    <div class="trust-badge">
                        <i class="fas fa-gift"></i>
                        100% gratuito
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección de Plan Personalizado -->
    <section class="section personalized-plan-section" aria-labelledby="plan-title" id="personalized-plan-section" style="display: none;">
        <div class="container">
            <div class="section-card">
                <h2 id="plan-title" class="section-title fade-in-up">Tu Plan Personalizado de Bienestar</h2>
                <p class="section-description fade-in-up">Basado en tu evaluación de ansiedad, hemos creado un plan específico para ayudarte a reducir tus niveles de ansiedad de manera efectiva.</p>
                
                <div class="plan-overview">
                    <div class="plan-stats">
                        <div class="plan-stat">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-content">
                                <h4>Nivel de Ansiedad Actual</h4>
                                <div class="anxiety-level" id="current-anxiety-level">Moderado</div>
                                <div class="anxiety-description" id="anxiety-description">Tu nivel de ansiedad requiere atención regular</div>
                            </div>
                        </div>
                        <div class="plan-stat">
                            <div class="stat-icon">
                                <i class="fas fa-target"></i>
                            </div>
                            <div class="stat-content">
                                <h4>Objetivo Semanal</h4>
                                <div class="weekly-goal" id="weekly-goal">5 actividades</div>
                                <div class="goal-description">Actividades recomendadas para esta semana</div>
                            </div>
                        </div>
                        <div class="plan-stat">
                            <div class="stat-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="stat-content">
                                <h4>Progreso del Plan</h4>
                                <div class="plan-progress" id="plan-progress">0%</div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progress-fill"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="plan-recommendations">
                    <h3>Recomendaciones Personalizadas</h3>
                    <div class="recommendations-grid" id="recommendations-grid">
                        <!-- Las recomendaciones se cargarán dinámicamente -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección de Ejercicios Profesional -->
    <section class="section exercises-section-professional" aria-labelledby="exercises-title">
        <div class="container">
            <div class="section-header-professional">
                <h2 id="exercises-title" class="section-title-professional fade-in-up">
                    <i class="fas fa-heart-pulse" aria-hidden="true"></i>
                    Ejercicios para Reducir la Ansiedad
                </h2>
                <p class="section-description-professional fade-in-up">
                    Selecciona un ejercicio basado en cómo te sientes hoy. Todos están validados científicamente y diseñados para tu bienestar mental.
                </p>
                
                <!-- Filtros de ejercicios -->
                <div class="exercise-filters fade-in-up">
                    <button class="filter-btn active" data-filter="all">
                        <i class="fas fa-th" aria-hidden="true"></i>
                        Todos
                    </button>
                    <button class="filter-btn" data-filter="quick">
                        <i class="fas fa-bolt" aria-hidden="true"></i>
                        Rápidos (5-10 min)
                    </button>
                    <button class="filter-btn" data-filter="extended">
                        <i class="fas fa-clock" aria-hidden="true"></i>
                        Extendidos (15+ min)
                    </button>
                    <button class="filter-btn" data-filter="evidence">
                        <i class="fas fa-certificate" aria-hidden="true"></i>
                        Más Validados
                    </button>
                </div>
            </div>
            
            <div class="exercises-grid-professional">
                <article class="exercise-card-professional fade-in-up" data-exercise="breathing" data-duration="quick" data-evidence="high">
                    <div class="exercise-header-professional">
                        <div class="exercise-badge-professional popular">
                            <i class="fas fa-star" aria-hidden="true"></i>
                            Más Popular
                        </div>
                        <div class="exercise-icon-professional breathing">
                            <i class="fas fa-lungs" aria-hidden="true"></i>
                        </div>
                    </div>
                    
                    <div class="exercise-content-professional">
                        <h3 class="exercise-title-professional">Respiración Profunda</h3>
                        <p class="exercise-description-professional">
                            Ejercicio de respiración guiada para calmar la mente y reducir la ansiedad inmediatamente.
                        </p>
                        
                        <div class="exercise-stats-professional">
                            <div class="stat-item">
                                <i class="fas fa-clock" aria-hidden="true"></i>
                                <span>5-10 min</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-chart-line" aria-hidden="true"></i>
                                <span>89% eficacia</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-users" aria-hidden="true"></i>
                                <span>2.3M usuarios</span>
                            </div>
                        </div>
                        
                        <div class="exercise-validation-professional">
                            <div class="validation-badge">
                                <i class="fas fa-check-circle" aria-hidden="true"></i>
                                Validado científicamente
                            </div>
                            <div class="validation-details">
                                <span class="tooltip-trigger">
                                    <i class="fas fa-info-circle" aria-hidden="true"></i>
                                    <span class="tooltip-content">
                                        Esta técnica tiene una eficacia del 89% para reducir síntomas de ansiedad en 5 minutos según estudios de la Universidad de Harvard.
                                    </span>
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="exercise-actions-professional">
                        <button class="btn-exercise-professional start-exercise" data-exercise="breathing" aria-label="Comenzar ejercicio de respiración profunda">
                            <div class="btn-content">
                                <i class="fas fa-play" aria-hidden="true"></i>
                                <span>Comenzar Respiración</span>
                            </div>
                            <div class="btn-effect"></div>
                        </button>
                    </div>
                </article>
                
                <article class="exercise-card-professional fade-in-up" data-exercise="meditation" data-duration="extended" data-evidence="high">
                    <div class="exercise-header-professional">
                        <div class="exercise-icon-professional meditation">
                            <i class="fas fa-leaf" aria-hidden="true"></i>
                        </div>
                    </div>
                    
                    <div class="exercise-content-professional">
                        <h3 class="exercise-title-professional">Meditación Guiada</h3>
                        <p class="exercise-description-professional">
                            Meditación mindfulness para reducir el estrés y mejorar la concentración mental.
                        </p>
                        
                        <div class="exercise-stats-professional">
                            <div class="stat-item">
                                <i class="fas fa-clock" aria-hidden="true"></i>
                                <span>10-15 min</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-chart-line" aria-hidden="true"></i>
                                <span>78% eficacia</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-users" aria-hidden="true"></i>
                                <span>1.8M usuarios</span>
                            </div>
                        </div>
                        
                        <div class="exercise-validation-professional">
                            <div class="validation-badge">
                                <i class="fas fa-check-circle" aria-hidden="true"></i>
                                Basado en evidencia
                            </div>
                            <div class="validation-details">
                                <span class="tooltip-trigger">
                                    <i class="fas fa-info-circle" aria-hidden="true"></i>
                                    <span class="tooltip-content">
                                        La meditación mindfulness reduce el cortisol en un 23% según estudios clínicos del Journal of Clinical Psychology.
                                    </span>
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="exercise-actions-professional">
                        <button class="btn-exercise-professional start-exercise" data-exercise="meditation" aria-label="Comenzar meditación guiada">
                            <div class="btn-content">
                                <i class="fas fa-play" aria-hidden="true"></i>
                                <span>Comenzar Meditación</span>
                            </div>
                            <div class="btn-effect"></div>
                        </button>
                    </div>
                </article>
                
                <article class="exercise-card-professional fade-in-up" data-exercise="progressive-relaxation" data-duration="extended" data-evidence="high">
                    <div class="exercise-header-professional">
                        <div class="exercise-icon-professional relaxation">
                            <i class="fas fa-spa" aria-hidden="true"></i>
                        </div>
                    </div>
                    
                    <div class="exercise-content-professional">
                        <h3 class="exercise-title-professional">Relajación Progresiva</h3>
                        <p class="exercise-description-professional">
                            Técnica de relajación muscular progresiva para liberar tensión física y mental.
                        </p>
                        
                        <div class="exercise-stats-professional">
                            <div class="stat-item">
                                <i class="fas fa-clock" aria-hidden="true"></i>
                                <span>15-20 min</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-chart-line" aria-hidden="true"></i>
                                <span>92% eficacia</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-users" aria-hidden="true"></i>
                                <span>1.2M usuarios</span>
                            </div>
                        </div>
                        
                        <div class="exercise-validation-professional">
                            <div class="validation-badge">
                                <i class="fas fa-check-circle" aria-hidden="true"></i>
                                Técnica clínica
                            </div>
                            <div class="validation-details">
                                <span class="tooltip-trigger">
                                    <i class="fas fa-info-circle" aria-hidden="true"></i>
                                    <span class="tooltip-content">
                                        Esta técnica reduce la tensión muscular en un 78% según estudios de terapia conductual.
                                    </span>
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="exercise-actions-professional">
                        <button class="btn-exercise-professional start-exercise" data-exercise="progressive-relaxation" aria-label="Comenzar relajación progresiva">
                            <div class="btn-content">
                                <i class="fas fa-play" aria-hidden="true"></i>
                                <span>Comenzar Relajación</span>
                            </div>
                            <div class="btn-effect"></div>
                        </button>
                    </div>
                </article>
                
                <article class="exercise-card-professional fade-in-up" data-exercise="grounding" data-duration="quick" data-evidence="high">
                    <div class="exercise-header-professional">
                        <div class="exercise-badge-professional new">
                            <i class="fas fa-sparkles" aria-hidden="true"></i>
                            Nuevo
                        </div>
                        <div class="exercise-icon-professional grounding">
                            <i class="fas fa-seedling" aria-hidden="true"></i>
                        </div>
                    </div>
                    
                    <div class="exercise-content-professional">
                        <h3 class="exercise-title-professional">Técnica de Grounding</h3>
                        <p class="exercise-description-professional">
                            Ejercicio de conexión con el presente para reducir pensamientos ansiosos.
                        </p>
                        
                        <div class="exercise-stats-professional">
                            <div class="stat-item">
                                <i class="fas fa-clock" aria-hidden="true"></i>
                                <span>5-10 min</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-chart-line" aria-hidden="true"></i>
                                <span>88% eficacia</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-users" aria-hidden="true"></i>
                                <span>950K usuarios</span>
                            </div>
                        </div>
                        
                        <div class="exercise-validation-professional">
                            <div class="validation-badge">
                                <i class="fas fa-check-circle" aria-hidden="true"></i>
                                Validado internacionalmente
                            </div>
                            <div class="validation-details">
                                <span class="tooltip-trigger">
                                    <i class="fas fa-info-circle" aria-hidden="true"></i>
                                    <span class="tooltip-content">
                                        Esta técnica reduce los pensamientos intrusivos en un 65% según estudios internacionales de psicología.
                                    </span>
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="exercise-actions-professional">
                        <button class="btn-exercise-professional start-exercise" data-exercise="grounding" aria-label="Comenzar técnica de grounding">
                            <div class="btn-content">
                                <i class="fas fa-play" aria-hidden="true"></i>
                                <span>Comenzar Grounding</span>
                            </div>
                            <div class="btn-effect"></div>
                        </button>
                    </div>
                </article>
            </div>
            
            <!-- Información adicional -->
            <div class="exercise-info-professional fade-in-up">
                <div class="info-card">
                    <i class="fas fa-shield-alt" aria-hidden="true"></i>
                    <h4>Seguridad y Privacidad</h4>
                    <p>Todos los ejercicios son seguros y tus datos están protegidos con encriptación de grado médico.</p>
                </div>
                <div class="info-card">
                    <i class="fas fa-graduation-cap" aria-hidden="true"></i>
                    <h4>Basado en Ciencia</h4>
                    <p>Desarrollado por psicólogos clínicos y validado por estudios científicos internacionales.</p>
                </div>
                <div class="info-card">
                    <i class="fas fa-mobile-alt" aria-hidden="true"></i>
                    <h4>Accesible 24/7</h4>
                    <p>Disponible en cualquier momento y lugar. No requiere conexión a internet después de la primera carga.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal Simple de Ejercicio -->
    <div class="simple-exercise-modal" id="simple-exercise-modal" style="display: none;">
        <div class="modal-overlay" onclick="closeSimpleModal()"></div>
        <div class="modal-content-simple">
            <div class="modal-header-simple">
                <h2 id="simple-modal-title">Ejercicio de Bienestar</h2>
                <button class="close-btn" onclick="closeSimpleModal()">×</button>
            </div>
            <div class="modal-body-simple">
                <div id="simple-exercise-content">
                    <p>Preparando ejercicio...</p>
                </div>
                <div class="modal-controls-simple">
                    <button class="btn-start" id="btn-start-simple">Comenzar</button>
                    <button class="btn-pause" id="btn-pause-simple" style="display: none;">Pausar</button>
                    <button class="btn-complete" id="btn-complete-simple" style="display: none;">Completar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Ejercicio -->
    <div class="exercise-modal" id="exercise-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Ejercicio de Respiración</h3>
                <button class="close-modal" id="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="exercise-instructions" id="exercise-instructions">
                    <!-- Las instrucciones se cargarán aquí -->
                </div>
                <div class="exercise-timer" id="exercise-timer">
                    <div class="timer-display">00:00</div>
                    <div class="timer-controls">
                        <button class="btn btn-outline" id="pause-timer">Pausar</button>
                        <button class="btn btn-primary" id="complete-exercise">Completar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sección de Reflexión Mejorada -->
    <section class="section reflection-section-enhanced" aria-labelledby="reflection-title">
        <div class="container">
            <div class="section-card">
                <h2 id="reflection-title" class="section-title fade-in-up">Reflexión Personal</h2>
                <p class="section-description fade-in-up">Escribe sobre cómo te sientes después del ejercicio. La reflexión es clave para el crecimiento personal y el bienestar mental.</p>
                
                <div class="reflection-card-enhanced">
                    <div class="mood-selector-enhanced">
                        <h3 class="mood-title">¿Cómo te sientes ahora?</h3>
                        <p class="mood-subtitle">Selecciona el estado que mejor describe tu experiencia actual</p>
                        <div class="mood-buttons-enhanced">
                            <button class="mood-btn-enhanced" data-mood="calm" data-emoji="😌">
                                <div class="mood-icon">😌</div>
                                <span class="mood-label">Tranquilo</span>
                                <span class="mood-description">Sensación de paz y calma</span>
                            </button>
                            <button class="mood-btn-enhanced" data-mood="relaxed" data-emoji="😊">
                                <div class="mood-icon">😊</div>
                                <span class="mood-label">Relajado</span>
                                <span class="mood-description">Cuerpo y mente relajados</span>
                            </button>
                            <button class="mood-btn-enhanced" data-mood="neutral" data-emoji="😐">
                                <div class="mood-icon">😐</div>
                                <span class="mood-label">Neutral</span>
                                <span class="mood-description">Estado equilibrado</span>
                            </button>
                            <button class="mood-btn-enhanced" data-mood="anxious" data-emoji="😰">
                                <div class="mood-icon">😰</div>
                                <span class="mood-label">Ansioso</span>
                                <span class="mood-description">Sensación de inquietud</span>
                            </button>
                            <button class="mood-btn-enhanced" data-mood="overwhelmed" data-emoji="😵">
                                <div class="mood-icon">😵</div>
                                <span class="mood-label">Abrumado</span>
                                <span class="mood-description">Sensación de sobrecarga</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="writing-area-enhanced">
                        <div class="writing-header">
                            <h4>Tu Reflexión Personal</h4>
                            <p>Comparte tus pensamientos y sensaciones de manera libre y honesta</p>
                        </div>
                        
                        <textarea 
                            id="reflection-text" 
                            class="reflection-textarea-enhanced"
                            placeholder="Escribe sobre cómo te sientes después del ejercicio. ¿Qué pensamientos o sensaciones tienes? ¿Qué te ayudó más? ¿Qué aprendiste sobre ti mismo?"
                            rows="6"
                        ></textarea>

                        <!-- Sistema de Etiquetas -->
                        <div class="tags-section-enhanced">
                            <div class="tags-header">
                                <h5>Etiquetas</h5>
                                <p>Organiza tu reflexión con etiquetas personalizadas</p>
                            </div>
                            
                            <div class="tags-input-container">
                                <input 
                                    type="text" 
                                    id="entry-tags" 
                                    class="tags-input-enhanced"
                                    placeholder="Escribe una etiqueta y presiona Enter..."
                                >
                                <div id="tag-suggestions" class="tag-suggestions-enhanced"></div>
                            </div>
                            
                            <div id="selected-tags" class="selected-tags-enhanced"></div>
                        </div>
                        
                        <div class="writing-tools-enhanced">
                            <div class="character-count-enhanced">
                                <i class="fas fa-keyboard"></i>
                                <span id="char-count">0</span> caracteres escritos
                            </div>
                            <div class="writing-prompts-enhanced">
                                <h5>Preguntas para reflexionar:</h5>
                                <div class="prompts-grid">
                                    <button class="prompt-btn-enhanced" data-prompt="feelings">
                                        <i class="fas fa-heart"></i>
                                        ¿Cómo me siento ahora?
                                    </button>
                                    <button class="prompt-btn-enhanced" data-prompt="thoughts">
                                        <i class="fas fa-brain"></i>
                                        ¿Qué pensamientos tengo?
                                    </button>
                                    <button class="prompt-btn-enhanced" data-prompt="gratitude">
                                        <i class="fas fa-star"></i>
                                        ¿Por qué me siento agradecido?
                                    </button>
                                    <button class="prompt-btn-enhanced" data-prompt="insights">
                                        <i class="fas fa-lightbulb"></i>
                                        ¿Qué aprendí hoy?
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="reflection-actions-enhanced">
                        <button class="btn-cta-secondary" id="clear-reflection">
                            <i class="fas fa-eraser"></i>
                            Limpiar
                        </button>
                        <button class="btn-cta-primary" id="save-reflection" disabled>
                            <i class="fas fa-save"></i>
                            Guardar Reflexión
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección de Seguimiento de Ansiedad -->
    <section class="section anxiety-tracking-section" aria-labelledby="anxiety-tracking-title">
        <div class="container">
            <div class="section-card">
                <h2 id="anxiety-tracking-title" class="section-title fade-in-up">Seguimiento de Niveles de Ansiedad</h2>
                <p class="section-description fade-in-up">Registra tu nivel de ansiedad diariamente para ver tu progreso y ajustar tu plan personalizado.</p>
                
                <div class="anxiety-tracker">
                    <div class="anxiety-scale">
                        <h3>¿Cómo te sientes hoy?</h3>
                        <p>Selecciona tu nivel de ansiedad actual (1 = Muy tranquilo, 10 = Muy ansioso)</p>
                        <div class="scale-container">
                            <div class="scale-labels">
                                <span>Muy tranquilo</span>
                                <span>Muy ansioso</span>
                            </div>
                            <div class="scale-slider">
                                <input type="range" id="anxiety-scale" min="1" max="10" value="5" class="anxiety-range">
                                <div class="scale-numbers">
                                    <span>1</span>
                                    <span>2</span>
                                    <span>3</span>
                                    <span>4</span>
                                    <span>5</span>
                                    <span>6</span>
                                    <span>7</span>
                                    <span>8</span>
                                    <span>9</span>
                                    <span>10</span>
                                </div>
                            </div>
                            <div class="current-level">
                                <span>Nivel actual: </span>
                                <span id="current-level-display">5</span>
                                <span id="level-description">Moderado</span>
                            </div>
                        </div>
                        <button class="btn-cta-primary" id="save-anxiety-level">
                            <i class="fas fa-save"></i>
                            Guardar Nivel de Ansiedad
                        </button>
                    </div>
                    
                    <div class="anxiety-chart">
                        <h3>Tu Progreso</h3>
                        <div class="chart-container">
                            <canvas id="anxiety-chart" width="400" height="200"></canvas>
                        </div>
                        <div class="chart-stats">
                            <div class="chart-stat">
                                <span class="stat-label">Promedio semanal:</span>
                                <span class="stat-value" id="weekly-average">-</span>
                            </div>
                            <div class="chart-stat">
                                <span class="stat-label">Tendencia:</span>
                                <span class="stat-value" id="anxiety-trend">-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Calendario de Progreso Mejorado -->
    <section class="section calendar-section-enhanced" aria-labelledby="calendar-title">
        <div class="container">
            <div class="section-card">
                <h2 id="calendar-title" class="section-title fade-in-up">Mi Plan de Actividades Diarias</h2>
                <p class="section-description fade-in-up">Sigue tu plan personalizado con actividades específicas para reducir la ansiedad cada día.</p>
                
                <div class="calendar-container-enhanced">
                    <div class="calendar-header-enhanced">
                        <button class="calendar-nav-enhanced" id="prev-month" aria-label="Mes anterior">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h3 id="current-month" class="calendar-month-title">Enero 2024</h3>
                        <button class="calendar-nav-enhanced" id="next-month" aria-label="Mes siguiente">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    
                    <div class="calendar-grid-enhanced" id="calendar-grid" role="grid" aria-label="Calendario de actividades">
                        <!-- El calendario se generará dinámicamente -->
                    </div>
                    
                    <!-- Modal de Actividad Diaria -->
                    <div class="daily-activity-modal" id="daily-activity-modal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3 id="activity-date">Actividades para hoy</h3>
                                <button class="close-modal" id="close-activity-modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div class="daily-activities" id="daily-activities">
                                    <!-- Las actividades se cargarán aquí -->
                                </div>
                                <div class="activity-progress">
                                    <h4>Progreso del día</h4>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="daily-progress-fill"></div>
                                    </div>
                                    <span id="daily-progress-text">0/0 actividades completadas</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="calendar-legend-enhanced">
                        <div class="legend-item-enhanced">
                            <div class="legend-color completed"></div>
                            <span>Sesión completada</span>
                        </div>
                        <div class="legend-item-enhanced">
                            <div class="legend-color partial"></div>
                            <span>Sesión parcial</span>
                        </div>
                        <div class="legend-item-enhanced">
                            <div class="legend-color missed"></div>
                            <span>Día sin sesión</span>
                        </div>
                    </div>
                </div>
                
                <div class="progress-stats-enhanced">
                    <div class="stat-card-enhanced">
                        <div class="stat-icon-enhanced">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-content-enhanced">
                            <h4>Progreso Semanal</h4>
                            <div class="stat-value-enhanced" id="weekly-progress">0/7</div>
                            <div class="stat-label-enhanced">días activos</div>
                            <div class="progress-bar-enhanced">
                                <div class="progress-fill-enhanced" id="weekly-progress-fill"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card-enhanced">
                        <div class="stat-icon-enhanced">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <div class="stat-content-enhanced">
                            <h4>Meta Mensual</h4>
                            <div class="stat-value-enhanced" id="monthly-goal">0/30</div>
                            <div class="stat-label-enhanced">días objetivo</div>
                            <div class="progress-bar-enhanced">
                                <div class="progress-fill-enhanced" id="monthly-progress-fill"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card-enhanced">
                        <div class="stat-icon-enhanced">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="stat-content-enhanced">
                            <h4>Mejor Racha</h4>
                            <div class="stat-value-enhanced" id="best-streak">0</div>
                            <div class="stat-label-enhanced">días consecutivos</div>
                            <div class="streak-indicator" id="streak-indicator">
                                <div class="streak-dots" id="streak-dots"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Información Importante -->
    <section class="section info-section-enhanced" aria-labelledby="info-title">
        <div class="container">
            <div class="info-header-enhanced">
                <h2 id="info-title" class="section-title fade-in-up">Información Importante</h2>
                <p class="section-description fade-in-up">Conoce más sobre nuestro diario de bienestar y tu privacidad.</p>
            </div>
            
            <div class="info-grid-enhanced">
                <div class="info-card-enhanced fade-in-up" data-card="privacy">
                    <div class="info-icon-enhanced">
                        <i class="fas fa-lock" aria-hidden="true"></i>
                    </div>
                    <h3 class="info-title-enhanced">Privacidad Garantizada</h3>
                    <p class="info-description-enhanced">Tus reflexiones están encriptadas end-to-end. Solo tú puedes acceder a tu información personal.</p>
                    <div class="info-features-enhanced">
                        <span class="feature-tag">Encriptación AES-256</span>
                        <span class="feature-tag">Cero conocimiento</span>
                    </div>
                </div>
                
                <div class="info-card-enhanced fade-in-up" data-card="science">
                    <div class="info-icon-enhanced">
                        <i class="fas fa-heart" aria-hidden="true"></i>
                    </div>
                    <h3 class="info-title-enhanced">Basado en Ciencia</h3>
                    <p class="info-description-enhanced">Todos los ejercicios están respaldados por investigación científica y técnicas terapéuticas validadas.</p>
                    <div class="info-features-enhanced">
                        <span class="feature-tag">TCC Validada</span>
                        <span class="feature-tag">Mindfulness</span>
                    </div>
                </div>
                
                <div class="info-card-enhanced fade-in-up" data-card="tracking">
                    <div class="info-icon-enhanced">
                        <i class="fas fa-chart-line" aria-hidden="true"></i>
                    </div>
                    <h3 class="info-title-enhanced">Seguimiento Personalizado</h3>
                    <p class="info-description-enhanced">Visualiza tu progreso con métricas detalladas y patrones de bienestar a lo largo del tiempo.</p>
                    <div class="info-features-enhanced">
                        <span class="feature-tag">Analytics Avanzados</span>
                        <span class="feature-tag">Patrones IA</span>
                    </div>
                </div>
                
                <div class="info-card-enhanced fade-in-up" data-card="access">
                    <div class="info-icon-enhanced">
                        <i class="fas fa-mobile-alt" aria-hidden="true"></i>
                    </div>
                    <h3 class="info-title-enhanced">Acceso 24/7</h3>
                    <p class="info-description-enhanced">Tu diario está disponible cuando lo necesites, desde cualquier dispositivo y en cualquier momento.</p>
                    <div class="info-features-enhanced">
                        <span class="feature-tag">Multi-dispositivo</span>
                        <span class="feature-tag">Sincronización</span>
                    </div>
                </div>
            </div>
            
            <!-- Botones de acción adicionales -->
            <div class="info-actions-enhanced">
                <button class="btn-info-primary" id="learn-more-btn">
                    <i class="fas fa-info-circle"></i>
                    Saber Más
                </button>
                <button class="btn-info-secondary" id="privacy-policy-btn">
                    <i class="fas fa-shield-alt"></i>
                    Política de Privacidad
                </button>
            </div>
        </div>
    </section>

    <!-- Sección de Logros y Motivación -->
    <section class="section achievements-section-enhanced" aria-labelledby="achievements-title">
        <div class="container">
            <div class="achievements-container-enhanced">
                <div class="achievements-header-enhanced">
                    <h2 id="achievements-title" class="section-title fade-in-up">Mis Logros</h2>
                    <p class="section-description fade-in-up">Celebra tu progreso y mantén la motivación con estos logros especiales.</p>
                    <div class="achievements-stats-enhanced">
                        <div class="stat-item-enhanced">
                            <span class="stat-number" id="total-achievements">0</span>
                            <span class="stat-label">Logros Desbloqueados</span>
                        </div>
                        <div class="stat-item-enhanced">
                            <span class="stat-number" id="achievement-streak">0</span>
                            <span class="stat-label">Días Consecutivos</span>
                        </div>
                    </div>
                </div>
                
                <div class="achievements-grid-enhanced" id="achievements-grid">
                    <!-- Los logros se cargarán dinámicamente -->
                </div>
                
                <div class="achievements-actions-enhanced">
                    <button class="btn-achievement-primary" id="share-achievements">
                        <i class="fas fa-share-alt"></i>
                        Compartir Logros
                    </button>
                    <button class="btn-achievement-secondary" id="view-all-achievements">
                        <i class="fas fa-trophy"></i>
                        Ver Todos los Logros
                    </button>
                </div>
                
                <div class="motivation-quote">
                    <div class="quote-content">
                        <i class="fas fa-quote-left"></i>
                        <p id="motivation-text">Cada pequeño paso hacia el bienestar es una victoria que merece ser celebrada.</p>
                        <div class="quote-author">
                            <span>Tu compañero de bienestar</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección de Recordatorios Inteligentes -->
    <section class="section reminders-section" aria-labelledby="reminders-title">
        <div class="container">
            <div class="section-card">
                <h2 id="reminders-title" class="section-title fade-in-up">Recordatorios Inteligentes</h2>
                <p class="section-description fade-in-up">Configura recordatorios personalizados para mantener tu rutina de bienestar.</p>
                
                <div class="reminders-container">
                    <div class="reminder-settings">
                        <h3>Configurar Recordatorios</h3>
                        <div class="reminder-options">
                            <div class="reminder-option">
                                <label class="reminder-checkbox">
                                    <input type="checkbox" id="morning-reminder" checked>
                                    <span class="checkmark"></span>
                                    <div class="reminder-content">
                                        <h4>Respiración Matutina</h4>
                                        <p>8:00 AM - Comienza el día con calma</p>
                                    </div>
                                </label>
                            </div>
                            <div class="reminder-option">
                                <label class="reminder-checkbox">
                                    <input type="checkbox" id="evening-reminder" checked>
                                    <span class="checkmark"></span>
                                    <div class="reminder-content">
                                        <h4>Reflexión Nocturna</h4>
                                        <p>8:00 PM - Reflexiona sobre tu día</p>
                                    </div>
                                </label>
                            </div>
                            <div class="reminder-option">
                                <label class="reminder-checkbox">
                                    <input type="checkbox" id="weekly-reminder">
                                    <span class="checkmark"></span>
                                    <div class="reminder-content">
                                        <h4>Revisión Semanal</h4>
                                        <p>Domingos 6:00 PM - Revisa tu progreso</p>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="reminder-status">
                        <h3>Estado de Recordatorios</h3>
                        <div class="status-indicator">
                            <div class="status-icon">
                                <i class="fas fa-bell"></i>
                            </div>
                            <div class="status-text">
                                <h4>Recordatorios Activos</h4>
                                <p id="active-reminders-count">2 recordatorios configurados</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección de Entradas Anteriores Mejorada -->
    <section class="section entries-section-enhanced" aria-labelledby="entries-title">
        <div class="container">
            <div class="reflections-container-enhanced">
                <div class="reflections-header-enhanced">
                    <h2 id="entries-title" class="section-title fade-in-up">Mis Reflexiones</h2>
                    <p class="section-description fade-in-up">Revisa tus entradas anteriores y observa tu progreso hacia el bienestar mental.</p>
                    <div class="reflections-summary-enhanced">
                        <div class="summary-item-enhanced">
                            <i class="fas fa-pen-fancy"></i>
                            <span class="summary-number" id="total-reflections">0</span>
                            <span class="summary-label">Reflexiones Escritas</span>
                        </div>
                        <div class="summary-item-enhanced">
                            <i class="fas fa-calendar-check"></i>
                            <span class="summary-number" id="reflection-streak">0</span>
                            <span class="summary-label">Días Consecutivos</span>
                        </div>
                        <div class="summary-item-enhanced">
                            <i class="fas fa-chart-line"></i>
                            <span class="summary-number" id="avg-mood">0</span>
                            <span class="summary-label">Estado Promedio</span>
                        </div>
                    </div>
                </div>
                
                <div class="entries-filters-enhanced">
                    <div class="filter-group-enhanced">
                        <label for="search-entries" class="filter-label">
                            <i class="fas fa-search"></i>
                            Buscar en reflexiones:
                        </label>
                        <input 
                            type="text" 
                            id="search-entries" 
                            class="filter-input" 
                            placeholder="Escribe palabras clave..."
                        >
                    </div>
                    
                    <div class="filter-group-enhanced">
                        <label for="date-filter" class="filter-label">
                            <i class="fas fa-calendar"></i>
                            Filtrar por fecha:
                        </label>
                        <select id="date-filter" class="filter-select">
                            <option value="all">Todas las fechas</option>
                            <option value="today">Hoy</option>
                            <option value="week">Esta semana</option>
                            <option value="month">Este mes</option>
                        </select>
                    </div>
                    
                    <div class="filter-group-enhanced">
                        <label for="mood-filter" class="filter-label">
                            <i class="fas fa-heart"></i>
                            Filtrar por estado:
                        </label>
                        <select id="mood-filter" class="filter-select">
                            <option value="all">Todos los estados</option>
                            <option value="calm">Tranquilo</option>
                            <option value="relaxed">Relajado</option>
                            <option value="neutral">Neutral</option>
                            <option value="anxious">Ansioso</option>
                            <option value="overwhelmed">Abrumado</option>
                        </select>
                    </div>

                    <div class="filter-group-enhanced">
                        <label for="exercise-filter" class="filter-label">
                            <i class="fas fa-dumbbell"></i>
                            Filtrar por ejercicio:
                        </label>
                        <select id="exercise-filter" class="filter-select">
                            <option value="all">Todos los ejercicios</option>
                            <option value="breathing">Respiración Profunda</option>
                            <option value="meditation">Meditación</option>
                            <option value="progressive-relaxation">Relajación Progresiva</option>
                            <option value="grounding">Grounding</option>
                            <option value="none">Sin ejercicio</option>
                        </select>
                    </div>

                    <div class="filter-group-enhanced">
                        <label for="tag-filter" class="filter-label">
                            <i class="fas fa-tags"></i>
                            Filtrar por etiqueta:
                        </label>
                        <select id="tag-filter" class="filter-select">
                            <option value="all">Todas las etiquetas</option>
                        </select>
                    </div>
                </div>

                <div class="entries-actions-enhanced">
                    <div class="results-info">
                        <span id="results-counter">0 entradas encontradas</span>
                        <div class="auto-save-info">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <span>Último respaldo: <span id="last-save-time">Cargando...</span></span>
                        </div>
                    </div>
                    
                    <div class="export-actions">
                        <button class="btn-export" id="export-json" title="Exportar datos en formato JSON">
                            <i class="fas fa-download"></i>
                            <span>JSON</span>
                        </button>
                        <button class="btn-export" id="export-pdf" title="Exportar como PDF">
                            <i class="fas fa-file-pdf"></i>
                            <span>PDF</span>
                        </button>
                        <button class="btn-export" id="export-csv" title="Exportar como CSV">
                            <i class="fas fa-file-csv"></i>
                            <span>CSV</span>
                        </button>
                    </div>
                </div>
                
                <div class="entries-list-enhanced" id="entries-list" role="list">
                    <!-- Las entradas se cargarán aquí -->
                </div>
                
                <div class="load-more-container-enhanced">
                    <button class="btn-cta-secondary" id="load-more">
                        <i class="fas fa-plus"></i>
                        Cargar más entradas
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección de Objetivos Personalizados -->
    <section class="section goals-section-enhanced" aria-labelledby="goals-title">
        <div class="container">
            <div class="goals-container-enhanced">
                <div class="goals-header-enhanced">
                    <h2 id="goals-title" class="section-title fade-in-up">Mis Objetivos de Bienestar</h2>
                    <p class="section-description fade-in-up">Establece y sigue tus objetivos personales para mejorar tu bienestar mental.</p>
                    <div class="goals-progress-enhanced">
                        <div class="progress-circle-enhanced">
                            <div class="progress-fill-enhanced" id="goals-progress-circle"></div>
                            <div class="progress-text-enhanced">
                                <span class="progress-percentage" id="goals-progress-percentage">0%</span>
                                <span class="progress-label">Completado</span>
                            </div>
                        </div>
                        <div class="goals-stats-enhanced">
                            <div class="goal-stat-enhanced">
                                <span class="stat-number" id="total-goals">0</span>
                                <span class="stat-label">Objetivos Totales</span>
                            </div>
                            <div class="goal-stat-enhanced">
                                <span class="stat-number" id="completed-goals">0</span>
                                <span class="stat-label">Completados</span>
                            </div>
                            <div class="goal-stat-enhanced">
                                <span class="stat-number" id="active-goals">0</span>
                                <span class="stat-label">Activos</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="goals-actions">
                    <button class="btn-cta-primary" id="create-goal">
                        <i class="fas fa-plus"></i>
                        Crear Nuevo Objetivo
                    </button>
                </div>

                <div class="goals-list" id="goals-list" role="list">
                    <!-- Los objetivos se cargarán aquí -->
                </div>
            </div>
        </div>
    </section>

    <!-- Modal de Creación de Objetivos -->
    <div class="goal-modal" id="goal-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="goal-modal-title">Crear Nuevo Objetivo</h3>
                <button class="close-modal" id="close-goal-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="goal-form">
                    <div class="form-group">
                        <label for="goal-title" class="form-label">Título del Objetivo *</label>
                        <input 
                            type="text" 
                            id="goal-title" 
                            class="form-input" 
                            placeholder="Ej: Meditar 30 días seguidos"
                            required
                        >
                    </div>
                    
                    <div class="form-group">
                        <label for="goal-description" class="form-label">Descripción</label>
                        <textarea 
                            id="goal-description" 
                            class="form-textarea" 
                            placeholder="Describe tu objetivo y por qué es importante para ti..."
                            rows="3"
                        ></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="goal-target" class="form-label">Valor Objetivo *</label>
                            <input 
                                type="number" 
                                id="goal-target" 
                                class="form-input" 
                                placeholder="30"
                                min="1"
                                required
                            >
                        </div>
                        
                        <div class="form-group">
                            <label for="goal-category" class="form-label">Categoría</label>
                            <select id="goal-category" class="form-select">
                                <option value="exercises">Ejercicios</option>
                                <option value="reflections">Reflexiones</option>
                                <option value="streak">Racha</option>
                                <option value="wellness">Bienestar</option>
                                <option value="custom">Personalizado</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="goal-deadline" class="form-label">Fecha Límite (Opcional)</label>
                        <input 
                            type="date" 
                            id="goal-deadline" 
                            class="form-input"
                        >
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn-cta-secondary" id="cancel-goal">
                            Cancelar
                        </button>
                        <button type="submit" class="btn-cta-primary">
                            <i class="fas fa-save"></i>
                            Crear Objetivo
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Sección de Recordatorios Inteligentes -->
    <section class="section reminders-section" aria-labelledby="reminders-title">
        <div class="container">
            <div class="section-card">
                <div class="reminders-header">
                    <h2 id="reminders-title" class="section-title fade-in-up">Recordatorios Inteligentes</h2>
                    <p class="section-description fade-in-up">Recordatorios personalizados basados en tus patrones de uso y preferencias.</p>
                </div>
                
                <div class="reminders-actions">
                    <button class="btn-cta-primary" id="setup-reminders">
                        <i class="fas fa-cog"></i>
                        Configurar Recordatorios
                    </button>
                    <button class="btn-cta-secondary" id="disable-reminders">
                        <i class="fas fa-bell-slash"></i>
                        Desactivar Todos
                    </button>
                </div>

                <div class="reminders-info">
                    <div class="reminder-status">
                        <i class="fas fa-bell"></i>
                        <span>Recordatorios activos basados en tus patrones</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal de Configuración de Recordatorios -->
    <div class="reminder-modal" id="reminder-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="reminder-modal-title">Configurar Recordatorios</h3>
                <button class="close-modal" id="close-reminder-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="reminder-form">
                    <div class="form-group">
                        <label for="reminder-time" class="form-label">Hora del Recordatorio</label>
                        <input 
                            type="time" 
                            id="reminder-time" 
                            class="form-input" 
                            value="20:00"
                        >
                    </div>
                    
                    <div class="form-group">
                        <label for="reminder-frequency" class="form-label">Frecuencia</label>
                        <select id="reminder-frequency" class="form-select">
                            <option value="daily">Diario</option>
                            <option value="weekdays">Solo días laborables</option>
                            <option value="weekends">Solo fines de semana</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-checkbox">
                            <input type="checkbox" id="reminder-enabled" checked>
                            <span class="checkmark"></span>
                            Activar recordatorios inteligentes
                        </label>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn-cta-secondary" id="cancel-reminder">
                            Cancelar
                        </button>
                        <button type="submit" class="btn-cta-primary">
                            <i class="fas fa-save"></i>
                            Guardar Configuración
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Sección de Estadísticas Avanzadas -->
    <section class="section advanced-analytics-section-enhanced" aria-labelledby="advanced-analytics-title">
        <div class="container">
            <div class="analytics-container-enhanced">
                <div class="analytics-header-enhanced">
                    <h2 id="advanced-analytics-title" class="section-title fade-in-up">Estadísticas Avanzadas</h2>
                    <p class="section-description fade-in-up">Análisis detallados y reportes personalizados de tu bienestar mental.</p>
                    <div class="analytics-overview-enhanced">
                        <div class="overview-card-enhanced">
                            <div class="overview-icon-enhanced">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <div class="overview-content-enhanced">
                                <h3>Progreso General</h3>
                                <p>Tu evolución en el bienestar mental</p>
                            </div>
                        </div>
                        <div class="overview-card-enhanced">
                            <div class="overview-icon-enhanced">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div class="overview-content-enhanced">
                                <h3>Insights IA</h3>
                                <p>Análisis inteligente de patrones</p>
                            </div>
                        </div>
                        <div class="overview-card-enhanced">
                            <div class="overview-icon-enhanced">
                                <i class="fas fa-download"></i>
                            </div>
                            <div class="overview-content-enhanced">
                                <h3>Reportes</h3>
                                <p>Exporta tus datos y progreso</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="analytics-filters">
                    <div class="filter-group">
                        <label for="stats-date-from" class="filter-label">Desde:</label>
                        <input type="date" id="stats-date-from" class="filter-input">
                    </div>
                    <div class="filter-group">
                        <label for="stats-date-to" class="filter-label">Hasta:</label>
                        <input type="date" id="stats-date-to" class="filter-input">
                    </div>
                </div>

                <div class="analytics-actions">
                    <button class="btn-cta-primary" id="generate-report">
                        <i class="fas fa-chart-line"></i>
                        Generar Reporte Completo
                    </button>
                    <button class="btn-cta-secondary" id="export-stats">
                        <i class="fas fa-download"></i>
                        Exportar Estadísticas
                    </button>
                </div>

                <div class="analytics-grid">
                    <div class="analytics-card">
                        <h3>Análisis de Estado de Ánimo</h3>
                        <canvas id="mood-chart" width="400" height="200"></canvas>
                        <div id="mood-stats"></div>
                    </div>
                    
                    <div class="analytics-card">
                        <h3>Patrones de Ejercicios</h3>
                        <canvas id="exercise-chart" width="400" height="200"></canvas>
                        <div id="exercise-stats"></div>
                    </div>
                    
                    <div class="analytics-card">
                        <h3>Tendencias de Bienestar</h3>
                        <div id="trends-display"></div>
                    </div>
                    
                    <div class="analytics-card">
                        <h3>Insights Personalizados</h3>
                        <div id="insights-display"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección de Análisis e Insights -->
    <section class="section analytics-section-enhanced" aria-labelledby="analytics-title">
        <div class="container">
            <div class="personal-analysis-container-enhanced">
                <div class="analysis-header-enhanced">
                    <h2 id="analytics-title" class="section-title fade-in-up">Tu Análisis Personal</h2>
                    <p class="section-description fade-in-up">Descubre patrones y insights sobre tu bienestar mental con análisis inteligentes.</p>
                    <div class="analysis-summary-enhanced">
                        <div class="summary-card-enhanced">
                            <div class="summary-icon-enhanced">
                                <i class="fas fa-lightbulb"></i>
                            </div>
                            <div class="summary-text-enhanced">
                                <h3>Insights Generados</h3>
                                <p id="insights-count">0</p>
                            </div>
                        </div>
                        <div class="summary-card-enhanced">
                            <div class="summary-icon-enhanced">
                                <i class="fas fa-trending-up"></i>
                            </div>
                            <div class="summary-text-enhanced">
                                <h3>Tendencia Actual</h3>
                                <p id="current-trend">Positiva</p>
                            </div>
                        </div>
                        <div class="summary-card-enhanced">
                            <div class="summary-icon-enhanced">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="summary-text-enhanced">
                                <h3>Puntuación</h3>
                                <p id="wellness-score">8.5/10</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="analytics-grid">
                    <div class="analytics-card">
                        <div class="analytics-header">
                            <h3>Patrones de Estado de Ánimo</h3>
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <div class="analytics-content">
                            <div class="mood-patterns" id="mood-patterns">
                                <!-- Los patrones se cargarán dinámicamente -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="analytics-card">
                        <div class="analytics-header">
                            <h3>Actividades Más Efectivas</h3>
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="analytics-content">
                            <div class="effectiveness-chart" id="effectiveness-chart">
                                <!-- El gráfico se cargará dinámicamente -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="analytics-card">
                        <div class="analytics-header">
                            <h3>Insights Personalizados</h3>
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <div class="analytics-content">
                            <div class="insights-list" id="insights-list">
                                <!-- Los insights se cargarán dinámicamente -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Final -->
    <section class="section final-cta-section-enhanced" aria-labelledby="final-cta-title">
        <div class="container">
            <div class="final-cta-container-enhanced">
                <div class="cta-content-enhanced">
                    <div class="cta-header-enhanced">
                        <h2 id="final-cta-title">¿Listo para comenzar tu viaje hacia el bienestar?</h2>
                        <p class="cta-description-enhanced">Únete a miles de personas que ya han mejorado su bienestar mental con nuestro diario personalizado</p>
                    </div>
                    
                    <div class="cta-features-enhanced">
                        <div class="feature-item-enhanced">
                            <i class="fas fa-shield-alt"></i>
                            <span>100% Privado y Seguro</span>
                        </div>
                        <div class="feature-item-enhanced">
                            <i class="fas fa-mobile-alt"></i>
                            <span>Disponible 24/7</span>
                        </div>
                        <div class="feature-item-enhanced">
                            <i class="fas fa-brain"></i>
                            <span>Basado en Ciencia</span>
                        </div>
                        <div class="feature-item-enhanced">
                            <i class="fas fa-chart-line"></i>
                            <span>Seguimiento Personalizado</span>
                        </div>
                    </div>
                    
                    <div class="cta-actions-enhanced">
                        <button class="btn-cta-primary-enhanced" aria-label="Comenzar mi diario de bienestar">
                            <i class="fas fa-heart" aria-hidden="true"></i>
                            <span>Comenzar Mi Diario</span>
                            <div class="btn-glow"></div>
                        </button>
                        <button class="btn-cta-secondary-enhanced" aria-label="Ver ejercicios disponibles">
                            <i class="fas fa-play" aria-hidden="true"></i>
                            <span>Ver Ejercicios</span>
                        </button>
                    </div>
                    
                    <div class="cta-stats-enhanced">
                        <div class="stat-enhanced">
                            <span class="stat-number">10,000+</span>
                            <span class="stat-label">Usuarios Activos</span>
                        </div>
                        <div class="stat-enhanced">
                            <span class="stat-number">95%</span>
                            <span class="stat-label">Satisfacción</span>
                        </div>
                        <div class="stat-enhanced">
                            <span class="stat-number">4.9★</span>
                            <span class="stat-label">Calificación</span>
                        </div>
                    </div>
                </div>
                <div class="cta-features-enhanced">
                    <div class="feature-item-enhanced">
                        <i class="fas fa-shield-alt" aria-hidden="true"></i>
                        <span>100% Privado</span>
                    </div>
                    <div class="feature-item-enhanced">
                        <i class="fas fa-graduation-cap" aria-hidden="true"></i>
                        <span>Basado en Ciencia</span>
                    </div>
                    <div class="feature-item-enhanced">
                        <i class="fas fa-gift" aria-hidden="true"></i>
                        <span>Completamente Gratuito</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Botón de Scroll to Top -->
    <button id="scroll-to-top" class="scroll-to-top-btn" aria-label="Volver arriba">
        <i class="fas fa-chevron-up"></i>
    </button>

    <!-- Scripts específicos del diario -->
    <script is:inline src="/js/pages/diary-wellness.js"></script>
    <script is:inline src="/js/pages/reflection-enhanced.js"></script>
    <script is:inline src="/js/pages/calendar-enhanced.js"></script>
    <script is:inline src="/js/pages/info-enhanced.js"></script>
    <script is:inline src="/js/pages/sections-enhanced.js"></script>
    <script is:inline>
        // Inicializar la clase DiaryWellness cuando el DOM esté listo
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Inicializando DiaryWellness...');
            window.diaryWellness = new DiaryWellness();
            console.log('DiaryWellness inicializado:', window.diaryWellness);
        });

        // Variables globales para el ejercicio
        let currentExercise = null;
        let exerciseTimer = null;
        let isExerciseRunning = false;

        // Función para abrir el modal simple
        function openSimpleModal(exerciseType) {
            console.log('Abriendo modal para ejercicio:', exerciseType);
            currentExercise = exerciseType;
            
            const modal = document.getElementById('simple-exercise-modal');
            const title = document.getElementById('simple-modal-title');
            const content = document.getElementById('simple-exercise-content');
            
            // Configurar título y contenido según el ejercicio
            const exerciseData = getSimpleExerciseData(exerciseType);
            title.textContent = exerciseData.title;
            content.innerHTML = exerciseData.content;
            
            // Resetear controles
            document.getElementById('btn-start-simple').style.display = 'block';
            document.getElementById('btn-pause-simple').style.display = 'none';
            document.getElementById('btn-complete-simple').style.display = 'none';
            
            // Mostrar modal
            modal.style.display = 'flex';
        }

        // Función para cerrar el modal simple
        function closeSimpleModal() {
            const modal = document.getElementById('simple-exercise-modal');
            modal.style.display = 'none';
            
            // Limpiar timer si está corriendo
            if (exerciseTimer) {
                clearInterval(exerciseTimer);
                exerciseTimer = null;
            }
            
            isExerciseRunning = false;
            currentExercise = null;
        }

        // Función para obtener datos del ejercicio
        function getSimpleExerciseData(exerciseType) {
            const exercises = {
                breathing: {
                    title: 'Respiración Profunda',
                    content: `
                        <div class="exercise-circle" id="breathing-circle">
                            <div>Preparate</div>
                        </div>
                        <div class="exercise-instructions">
                            <h3>Instrucciones:</h3>
                            <ol>
                                <li>Siéntate cómodamente con la espalda recta</li>
                                <li>Coloca la punta de la lengua detrás de los dientes superiores</li>
                                <li>Exhala completamente por la boca</li>
                                <li>Inhala por la nariz contando hasta 4</li>
                                <li>Mantén la respiración contando hasta 7</li>
                                <li>Exhala por la boca contando hasta 8</li>
                            </ol>
                        </div>
                    `
                },
                meditation: {
                    title: 'Meditación Guiada',
                    content: `
                        <div class="exercise-circle" id="meditation-circle">
                            <div>Centra tu atención</div>
                        </div>
                        <div class="exercise-instructions">
                            <h3>Instrucciones:</h3>
                            <ol>
                                <li>Encuentra una posición cómoda, sentado o acostado</li>
                                <li>Cierra los ojos suavemente</li>
                                <li>Enfócate en tu respiración natural</li>
                                <li>Cuando notes que tu mente divaga, regresa a la respiración</li>
                                <li>Observa tus pensamientos sin juzgarlos</li>
                                <li>Permite que las emociones fluyan</li>
                            </ol>
                        </div>
                    `
                },
                'progressive-relaxation': {
                    title: 'Relajación Progresiva',
                    content: `
                        <div class="exercise-circle" id="relaxation-circle">
                            <div>Relaja tu cuerpo</div>
                        </div>
                        <div class="exercise-instructions">
                            <h3>Instrucciones:</h3>
                            <ol>
                                <li>Siéntate o acuéstate cómodamente</li>
                                <li>Tensa cada grupo muscular por 5 segundos</li>
                                <li>Relaja completamente por 10 segundos</li>
                                <li>Sube gradualmente por todo el cuerpo</li>
                                <li>Presta atención a la diferencia entre tensión y relajación</li>
                            </ol>
                        </div>
                    `
                },
                grounding: {
                    title: 'Técnica de Grounding',
                    content: `
                        <div class="exercise-circle" id="grounding-circle">
                            <div>Conecta con el presente</div>
                        </div>
                        <div class="exercise-instructions">
                            <h3>Instrucciones:</h3>
                            <ol>
                                <li>Siéntate cómodamente con los pies en el suelo</li>
                                <li>Identifica 5 cosas que puedes ver</li>
                                <li>Identifica 4 cosas que puedes tocar</li>
                                <li>Identifica 3 cosas que puedes oír</li>
                                <li>Identifica 2 cosas que puedes oler</li>
                                <li>Identifica 1 cosa que puedes saborear</li>
                            </ol>
                        </div>
                    `
                }
            };
            
            return exercises[exerciseType] || exercises.breathing;
        }

        // Función para iniciar el ejercicio
        function startSimpleExercise() {
            console.log('Iniciando ejercicio:', currentExercise);
            isExerciseRunning = true;
            
            // Ocultar botón de inicio y mostrar controles
            document.getElementById('btn-start-simple').style.display = 'none';
            document.getElementById('btn-pause-simple').style.display = 'inline-block';
            document.getElementById('btn-complete-simple').style.display = 'inline-block';
            
            // Iniciar animación según el tipo de ejercicio
            startExerciseAnimation();
        }

        // Función para pausar/continuar ejercicio
        function toggleSimpleExercise() {
            const pauseBtn = document.getElementById('btn-pause-simple');
            
            if (isExerciseRunning) {
                isExerciseRunning = false;
                pauseBtn.textContent = 'Continuar';
                if (exerciseTimer) {
                    clearInterval(exerciseTimer);
                }
            } else {
                isExerciseRunning = true;
                pauseBtn.textContent = 'Pausar';
                startExerciseAnimation();
            }
        }

        // Función para completar ejercicio
        function completeSimpleExercise() {
            console.log('Ejercicio completado:', currentExercise);
            
            // Limpiar timer
            if (exerciseTimer) {
                clearInterval(exerciseTimer);
                exerciseTimer = null;
            }
            
            // Mostrar mensaje de completado
            const content = document.getElementById('simple-exercise-content');
            content.innerHTML = `
                <div class="exercise-circle" style="background: linear-gradient(135deg, #10b981, #059669);">
                    <div>¡Completado!</div>
                </div>
                <div class="exercise-instructions">
                    <h3>¡Bien hecho!</h3>
                    <p>Has completado el ejercicio de ${getSimpleExerciseData(currentExercise).title}.</p>
                    <p>Continúa practicando regularmente para obtener mejores resultados.</p>
                </div>
            `;
            
            // Ocultar controles
            document.getElementById('btn-pause-simple').style.display = 'none';
            document.getElementById('btn-complete-simple').style.display = 'none';
            
            // Cerrar modal después de 3 segundos
            setTimeout(() => {
                closeSimpleModal();
            }, 3000);
        }

        // Función para animar el ejercicio
        function startExerciseAnimation() {
            if (!isExerciseRunning) return;
            
            const circle = document.querySelector('.exercise-circle');
            if (!circle) return;
            
            let phase = 0;
            let count = 0;
            
            exerciseTimer = setInterval(() => {
                if (!isExerciseRunning) return;
                
                switch (currentExercise) {
                    case 'breathing':
                        animateBreathing(circle, phase, count);
                        break;
                    case 'meditation':
                        animateMeditation(circle);
                        break;
                    case 'progressive-relaxation':
                        animateRelaxation(circle);
                        break;
                    case 'grounding':
                        animateGrounding(circle);
                        break;
                }
                
                count++;
                if (count >= 19) { // 19 segundos por ciclo
                    phase = (phase + 1) % 3;
                    count = 0;
                }
            }, 1000);
        }

        // Animaciones específicas
        function animateBreathing(circle, phase, count) {
            const phases = ['Inhala', 'Mantén', 'Exhala'];
            const colors = ['#3b82f6', '#8b5cf6', '#10b981'];
            const scales = ['1.2', '1.1', '1'];
            
            circle.innerHTML = `<div>${phases[phase]}... ${count + 1}</div>`;
            circle.style.backgroundColor = colors[phase];
            circle.style.transform = `scale(${scales[phase]})`;
        }

        function animateMeditation(circle) {
            const messages = [
                'Centra tu atención',
                'Observa sin juzgar',
                'Permite que fluya',
                'Regresa al presente',
                'Encuentra tu calma'
            ];
            
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            circle.innerHTML = `<div>${randomMessage}</div>`;
            circle.style.transform = `scale(${1 + Math.sin(Date.now() / 1000) * 0.1})`;
        }

        function animateRelaxation(circle) {
            circle.innerHTML = '<div>Relajando...</div>';
            circle.style.transform = `scale(${1 + Math.sin(Date.now() / 2000) * 0.2})`;
        }

        function animateGrounding(circle) {
            const senses = ['VER', 'TOCAR', 'OÍR', 'OLER', 'SABOREAR'];
            const randomSense = senses[Math.floor(Math.random() * senses.length)];
            circle.innerHTML = `<div>Conecta con ${randomSense}</div>`;
        }

        // Función simple para probar los botones
        function testExerciseButtons() {
            console.log('Probando botones de ejercicios...');
            
            // Buscar todos los botones de ejercicios profesionales
            const buttons = document.querySelectorAll('.btn-exercise-professional');
            console.log('Botones encontrados:', buttons.length);
            
            buttons.forEach((btn, index) => {
                console.log(`Botón ${index + 1}:`, btn);
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('¡Botón clickeado!', this);
                    
                    // Obtener el tipo de ejercicio
                    const exerciseCard = this.closest('.exercise-card-professional');
                    const exercise = exerciseCard ? exerciseCard.dataset.exercise : 'unknown';
                    console.log('Ejercicio:', exercise);
                    
                    // Abrir modal simple
                    openSimpleModal(exercise);
                });
            });
            
            // Configurar controles del modal
            document.getElementById('btn-start-simple').addEventListener('click', startSimpleExercise);
            document.getElementById('btn-pause-simple').addEventListener('click', toggleSimpleExercise);
            document.getElementById('btn-complete-simple').addEventListener('click', completeSimpleExercise);
        }

        // Ejecutar la prueba después de que se cargue todo
        setTimeout(testExerciseButtons, 1000);

        // Scroll to top functionality
        const scrollToTopBtn = document.getElementById('scroll-to-top');
        
        if (scrollToTopBtn) {
            // Mostrar/ocultar botón según el scroll
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    scrollToTopBtn.classList.add('show');
                } else {
                    scrollToTopBtn.classList.remove('show');
                }
            });

            // Scroll suave al hacer click
            scrollToTopBtn.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }
    </script>
</BaseLayout>