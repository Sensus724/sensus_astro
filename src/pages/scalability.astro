---
import BaseLayout from '../layouts/BaseLayout.astro';
import ScalabilityDashboard from '../components/scalability/ScalabilityDashboard.astro';
import AutoScalingDashboard from '../components/scalability/AutoScalingDashboard.astro';
import LoadBalancingDashboard from '../components/scalability/LoadBalancingDashboard.astro';
import DatabaseOptimizationDashboard from '../components/scalability/DatabaseOptimizationDashboard.astro';
import AdvancedCachingDashboard from '../components/scalability/AdvancedCachingDashboard.astro';
import NetworkOptimizationDashboard from '../components/scalability/NetworkOptimizationDashboard.astro';
import LoadTestingDashboard from '../components/scalability/LoadTestingDashboard.astro';
import BackupDashboard from '../components/scalability/BackupDashboard.astro';
import DisasterRecoveryDashboard from '../components/scalability/DisasterRecoveryDashboard.astro';
import AuthGuard from '../components/security/AuthGuard.astro';
---

<BaseLayout title="Sensus - Escalabilidad y Performance">
  <AuthGuard requiredRole={['admin', 'devops']} redirectPath="/login">
    <main class="container mx-auto p-4">
      <h1 class="text-4xl font-extrabold text-center text-blue-500 mb-10">
        Escalabilidad y Performance
      </h1>

      <!-- Dashboard principal de escalabilidad -->
      <ScalabilityDashboard />

      <!-- Autoescalado -->
      <section class="mt-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-green-400">Autoescalado</h2>
        <AutoScalingDashboard />
      </section>

      <!-- Balanceo de Carga -->
      <section class="mt-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-purple-400">Balanceo de Carga</h2>
        <LoadBalancingDashboard />
      </section>

      <!-- Optimización de Base de Datos -->
      <section class="mt-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-yellow-400">Optimización de Base de Datos</h2>
        <DatabaseOptimizationDashboard />
      </section>

      <!-- Caching Avanzado -->
      <section class="mt-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-indigo-400">Caching Avanzado</h2>
        <AdvancedCachingDashboard />
      </section>

      <!-- Optimización de Red -->
      <section class="mt-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-teal-400">Optimización de Red</h2>
        <NetworkOptimizationDashboard />
      </section>

      <!-- Pruebas de Carga -->
      <section class="mt-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-orange-400">Pruebas de Carga</h2>
        <LoadTestingDashboard />
      </section>

      <!-- Backup y Recuperación -->
      <section class="mt-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-cyan-400">Backup y Recuperación</h2>
        <BackupDashboard />
      </section>

      <!-- Disaster Recovery -->
      <section class="mt-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-red-400">Disaster Recovery</h2>
        <DisasterRecoveryDashboard />
      </section>

      <!-- Información adicional sobre escalabilidad -->
      <section class="mt-12 p-6 bg-gray-800 text-white rounded-lg shadow-lg">
        <h2 class="text-3xl font-bold mb-6 text-center text-blue-400">
          Estrategias de Escalabilidad
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div>
            <h3 class="text-xl font-semibold mb-4 text-green-300">Escalabilidad Horizontal</h3>
            <ul class="list-disc list-inside space-y-2 text-gray-300">
              <li><strong>Autoescalado:</strong> Ajuste automático de recursos basado en métricas de carga</li>
              <li><strong>Balanceo de Carga:</strong> Distribución inteligente del tráfico entre múltiples instancias</li>
              <li><strong>Microservicios:</strong> Arquitectura distribuida para mejor escalabilidad</li>
              <li><strong>Contenedores:</strong> Kubernetes para orquestación y escalado automático</li>
            </ul>
          </div>
          <div>
            <h3 class="text-xl font-semibold mb-4 text-purple-300">Escalabilidad Vertical</h3>
            <ul class="list-disc list-inside space-y-2 text-gray-300">
              <li><strong>Optimización de Recursos:</strong> Mejora del rendimiento de hardware existente</li>
              <li><strong>Caching Inteligente:</strong> Múltiples niveles de caché para reducir latencia</li>
              <li><strong>Optimización de Base de Datos:</strong> Indexación, sharding y replicación</li>
              <li><strong>CDN y Edge Computing:</strong> Distribución de contenido cerca del usuario</li>
            </ul>
          </div>
        </div>
        
        <div class="mt-8">
          <h3 class="text-xl font-semibold mb-4 text-yellow-300">Métricas de Performance</h3>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="bg-gray-700 p-4 rounded-md">
              <h4 class="font-semibold text-blue-300 mb-2">Core Web Vitals</h4>
              <ul class="text-sm text-gray-300 space-y-1">
                <li>• LCP (Largest Contentful Paint)</li>
                <li>• FID (First Input Delay)</li>
                <li>• CLS (Cumulative Layout Shift)</li>
              </ul>
            </div>
            <div class="bg-gray-700 p-4 rounded-md">
              <h4 class="font-semibold text-green-300 mb-2">Métricas de Servidor</h4>
              <ul class="text-sm text-gray-300 space-y-1">
                <li>• CPU y Memoria</li>
                <li>• Latencia de Red</li>
                <li>• Throughput</li>
              </ul>
            </div>
            <div class="bg-gray-700 p-4 rounded-md">
              <h4 class="font-semibold text-purple-300 mb-2">Métricas de Aplicación</h4>
              <ul class="text-sm text-gray-300 space-y-1">
                <li>• Tiempo de Respuesta</li>
                <li>• Tasa de Error</li>
                <li>• Disponibilidad</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="mt-8">
          <h3 class="text-xl font-semibold mb-4 text-red-300">Disaster Recovery y Continuidad</h3>
          <p class="text-gray-300 mb-4">
            Nuestro sistema de disaster recovery está diseñado para garantizar la continuidad del negocio 
            con objetivos claros de RTO (Recovery Time Objective) y RPO (Recovery Point Objective).
          </p>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-gray-700 p-4 rounded-md">
              <h4 class="font-semibold text-orange-300 mb-2">RTO (Recovery Time Objective)</h4>
              <p class="text-sm text-gray-300">
                Tiempo máximo aceptable para restaurar el servicio después de un desastre.
                Nuestro objetivo es mantener RTOs inferiores a 4 horas para servicios críticos.
              </p>
            </div>
            <div class="bg-gray-700 p-4 rounded-md">
              <h4 class="font-semibold text-cyan-300 mb-2">RPO (Recovery Point Objective)</h4>
              <p class="text-sm text-gray-300">
                Cantidad máxima de datos que se pueden perder en caso de desastre.
                Nuestro objetivo es mantener RPOs inferiores a 1 hora para datos críticos.
              </p>
            </div>
          </div>
        </div>
      </section>
    </main>
  </AuthGuard>
</BaseLayout>